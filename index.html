<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>The PSYCHIC Game</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <style>
      body {
      background-image: linear-gradient(rgba(62, 20, 20, 0.4), rgba(62, 20, 20, 0.4)), 
      url(psychic.jpg);
      background-size:cover;
      color: #fff;
      }
      h1 {
        text-align: center;
      }
      </style>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <h1>The PSYCHIC Game</h1>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Guess what letter I'm thinking of<br>Press any letter key<span id="answer"><strong></strong></span></h2>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Wins: <span id="wins"><strong>0</strong></span></h2>
        </div>
      </div> 
      <div class="row">
        <div class="col-md-12">
          <h2>Losses: <span id="losses"><strong>0</strong></span></h2>
        </div>
      </div> 
      <div class="row">
        <div class="col-md-12">
          <h2>Guesses Remaining: <span id="guesses"><strong>9</strong></span></h2>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Your Guesses so far: <span id="guess-choice"><strong></strong></span></h2>
        </div>
      </div>      
    </div>
  
    <script type="text/javascript">

      // GAME RULES:
      // Player has 9 chances to guess a random letter picked by the computer
      // If the player guesses the correct letter before the chances run out, they earn a win
      // If the player does not guess the correct letter, then they earn a loss 

          var guessesRemaining = 9;
          var wins = 0;
          var losses = 0;
          var letterChoices = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
          var answer = randomLetter();
          var userText = document.getElementById("guess-choice");
          var choicesPicked = [];          

      init();

      // When a key is pressed, a letter is printed to the screen every time
      // guessesRemaining variable reduces by 1
      document.onkeyup = function(event) {
        var userGuess = event.key;

        if (choicesPicked.includes(userGuess)) {
                alert("letter already picked!") 
            }
        else if (
          (userGuess === "a") || 
          (userGuess === "b") || 
          (userGuess === "c") || 
          (userGuess === "d") || 
          (userGuess === "e") || 
          (userGuess === "f") || 
          (userGuess === "g") || 
          (userGuess === "h") || 
          (userGuess === "i") || 
          (userGuess === "j") || 
          (userGuess === "k") || 
          (userGuess === "l") || 
          (userGuess === "m") || 
          (userGuess === "n") || 
          (userGuess === "o") || 
          (userGuess === "p") || 
          (userGuess === "q") || 
          (userGuess === "r") || 
          (userGuess === "s") || 
          (userGuess === "t") || 
          (userGuess === "u") || 
          (userGuess === "v") || 
          (userGuess === "w") || 
          (userGuess === "x") || 
          (userGuess === "y") || 
          (userGuess === "z") 
          ) {
              userText.innerText += event.key;
              choicesPicked.push(userGuess);
              guessesRemaining--;
              document.querySelector('#guesses').textContent = guessesRemaining;


              if (answer === userGuess)
                {
                  choicesPicked = [];
                  wins++;
                  document.querySelector('#wins').textContent = wins;
                  guessesRemaining = 9;
                  document.querySelector('#guesses').textContent = guessesRemaining;
                  document.getElementById("guess-choice").textContent = "";
                  answer = randomLetter();
                  console.log(answer);
                  alert("You won! The answer was " + userGuess + ".");
                }

                else if (guessesRemaining == 0) {
                  choicesPicked = [];
                  losses++;
                  document.querySelector('#losses').textContent = losses;
                  guessesRemaining = 9;
                  document.querySelector('#guesses').textContent = guessesRemaining;
                  document.getElementById("guess-choice").textContent = "";
                  answer = randomLetter();
                  console.log(answer);
                };

            };
      }
      // Generates a random Letter for our answer
      function randomLetter() {
            var chars = "abcdefghijklmnopqurstuvwxyz";
            return chars.substr( Math.floor(Math.random() * 26), 1);
          };

      function init() {
        guessesRemaining = 9;
        wins = 0;
        losses = 0;
        answer = randomLetter();
        console.log(answer);        
      };

      </script>
  </body>
  </html>